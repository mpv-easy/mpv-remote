import{jsxs as m,jsx as v}from"https://esm.sh/react/jsx-runtime";import{useState as X,useCallback as we,StrictMode as Ie}from"https://esm.sh/react";import{createRoot as Ue}from"https://esm.sh/react-dom/client";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))t(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&t(c)}).observe(document,{childList:!0,subtree:!0});function a(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function t(r){if(r.ep)return;r.ep=!0;const l=a(r);fetch(r.href,l)}})();var I=Uint8Array,O=Uint16Array,fe=Int32Array,he=new I([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),ue=new I([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),ye=new I([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Ae=function(e,n){for(var a=new O(31),t=0;t<31;++t)a[t]=n+=1<<e[t-1];for(var r=new fe(a[30]),t=1;t<30;++t)for(var l=a[t];l<a[t+1];++l)r[l]=l-a[t]<<5|t;return{b:a,r}},xe=Ae(he,2),Ee=xe.b,ce=xe.r;Ee[28]=258,ce[258]=28;var De=Ae(ue,0),Ne=De.r,se=new O(32768);for(var d=0;d<32768;++d){var J=(d&43690)>>1|(d&21845)<<1;J=(J&52428)>>2|(J&13107)<<2,J=(J&61680)>>4|(J&3855)<<4,se[d]=((J&65280)>>8|(J&255)<<8)>>1}var ee=(function(e,n,a){for(var t=e.length,r=0,l=new O(n);r<t;++r)e[r]&&++l[e[r]-1];var c=new O(n);for(r=1;r<n;++r)c[r]=c[r-1]+l[r-1]<<1;var u;if(a){u=new O(1<<n);var s=15-n;for(r=0;r<t;++r)if(e[r])for(var g=r<<4|e[r],o=n-e[r],y=c[e[r]-1]++<<o,M=y|(1<<o)-1;y<=M;++y)u[se[y]>>s]=g}else for(u=new O(t),r=0;r<t;++r)e[r]&&(u[r]=se[c[e[r]-1]++]>>15-e[r]);return u}),K=new I(288);for(var d=0;d<144;++d)K[d]=8;for(var d=144;d<256;++d)K[d]=9;for(var d=256;d<280;++d)K[d]=7;for(var d=280;d<288;++d)K[d]=8;var re=new I(32);for(var d=0;d<32;++d)re[d]=5;var Ve=ee(K,9,0),ze=ee(re,5,0),Fe=function(e){return(e+7)/8|0},Te=function(e,n,a){return(a==null||a>e.length)&&(a=e.length),new I(e.subarray(n,a))},q=function(e,n,a){a<<=n&7;var t=n/8|0;e[t]|=a,e[t+1]|=a>>8},Y=function(e,n,a){a<<=n&7;var t=n/8|0;e[t]|=a,e[t+1]|=a>>8,e[t+2]|=a>>16},oe=function(e,n){for(var a=[],t=0;t<e.length;++t)e[t]&&a.push({s:t,f:e[t]});var r=a.length,l=a.slice();if(!r)return{t:Le,l:0};if(r==1){var c=new I(a[0].s+1);return c[a[0].s]=1,{t:c,l:1}}a.sort(function(P,F){return P.f-F.f}),a.push({s:-1,f:25001});var u=a[0],s=a[1],g=0,o=1,y=2;for(a[0]={s:-1,f:u.f+s.f,l:u,r:s};o!=r-1;)u=a[a[g].f<a[y].f?g++:y++],s=a[g!=o&&a[g].f<a[y].f?g++:y++],a[o++]={s:-1,f:u.f+s.f,l:u,r:s};for(var M=l[0].s,t=1;t<r;++t)l[t].s>M&&(M=l[t].s);var N=new O(M+1),A=ie(a[o-1],N,0);if(A>n){var t=0,w=0,E=A-n,z=1<<E;for(l.sort(function(F,C){return N[C.s]-N[F.s]||F.f-C.f});t<r;++t){var U=l[t].s;if(N[U]>n)w+=z-(1<<A-N[U]),N[U]=n;else break}for(w>>=E;w>0;){var B=l[t].s;N[B]<n?w-=1<<n-N[B]++-1:++t}for(;t>=0&&w;--t){var x=l[t].s;N[x]==n&&(--N[x],++w)}A=n}return{t:new I(N),l:A}},ie=function(e,n,a){return e.s==-1?Math.max(ie(e.l,n,a+1),ie(e.r,n,a+1)):n[e.s]=a},Ce=function(e){for(var n=e.length;n&&!e[--n];);for(var a=new O(++n),t=0,r=e[0],l=1,c=function(s){a[t++]=s},u=1;u<=n;++u)if(e[u]==r&&u!=n)++l;else{if(!r&&l>2){for(;l>138;l-=138)c(32754);l>2&&(c(l>10?l-11<<5|28690:l-3<<5|12305),l=0)}else if(l>3){for(c(r),--l;l>6;l-=6)c(8304);l>2&&(c(l-3<<5|8208),l=0)}for(;l--;)c(r);l=1,r=e[u]}return{c:a.subarray(0,t),n}},Z=function(e,n){for(var a=0,t=0;t<n.length;++t)a+=e[t]*n[t];return a},$e=function(e,n,a){var t=a.length,r=Fe(n+2);e[r]=t&255,e[r+1]=t>>8,e[r+2]=e[r]^255,e[r+3]=e[r+1]^255;for(var l=0;l<t;++l)e[r+l+4]=a[l];return(r+4+t)*8},pe=function(e,n,a,t,r,l,c,u,s,g,o){q(n,o++,a),++r[256];for(var y=oe(r,15),M=y.t,N=y.l,A=oe(l,15),w=A.t,E=A.l,z=Ce(M),U=z.c,B=z.n,x=Ce(w),P=x.c,F=x.n,C=new O(19),h=0;h<U.length;++h)++C[U[h]&31];for(var h=0;h<P.length;++h)++C[P[h]&31];for(var i=oe(C,7),k=i.t,R=i.l,S=19;S>4&&!k[ye[S-1]];--S);var _=g+5<<3,T=Z(r,K)+Z(l,re)+c,$=Z(r,M)+Z(l,w)+c+14+3*S+Z(C,k)+2*C[16]+3*C[17]+7*C[18];if(s>=0&&_<=T&&_<=$)return $e(n,o,e.subarray(s,s+g));var f,b,L,H;if(q(n,o,1+($<T)),o+=2,$<T){f=ee(M,N,0),b=M,L=ee(w,E,0),H=w;var ne=ee(k,R,0);q(n,o,B-257),q(n,o+5,F-1),q(n,o+10,S-4),o+=14;for(var h=0;h<S;++h)q(n,o+3*h,k[ye[h]]);o+=3*S;for(var D=[U,P],W=0;W<2;++W)for(var j=D[W],h=0;h<j.length;++h){var V=j[h]&31;q(n,o,ne[V]),o+=k[V],V>15&&(q(n,o,j[h]>>5&127),o+=j[h]>>12)}}else f=Ve,b=K,L=ze,H=re;for(var h=0;h<u;++h){var p=t[h];if(p>255){var V=p>>18&31;Y(n,o,f[V+257]),o+=b[V+257],V>7&&(q(n,o,p>>23&31),o+=he[V]);var G=p&31;Y(n,o,L[G]),o+=H[G],G>3&&(Y(n,o,p>>5&8191),o+=ue[G])}else Y(n,o,f[p]),o+=b[p]}return Y(n,o,f[256]),o+b[256]},Be=new fe([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Le=new I(0),qe=function(e,n,a,t,r,l){var c=l.z||e.length,u=new I(t+c+5*(1+Math.ceil(c/7e3))+r),s=u.subarray(t,u.length-r),g=l.l,o=(l.r||0)&7;if(n){o&&(s[0]=l.r>>3);for(var y=Be[n-1],M=y>>13,N=y&8191,A=(1<<a)-1,w=l.p||new O(32768),E=l.h||new O(A+1),z=Math.ceil(a/3),U=2*z,B=function(le){return(e[le]^e[le+1]<<z^e[le+2]<<U)&A},x=new fe(25e3),P=new O(288),F=new O(32),C=0,h=0,i=l.i||0,k=0,R=l.w||0,S=0;i+2<c;++i){var _=B(i),T=i&32767,$=E[_];if(w[T]=$,E[_]=T,R<=i){var f=c-i;if((C>7e3||k>24576)&&(f>423||!g)){o=pe(e,s,0,x,P,F,h,k,S,i-S,o),k=C=h=0,S=i;for(var b=0;b<286;++b)P[b]=0;for(var b=0;b<30;++b)F[b]=0}var L=2,H=0,ne=N,D=T-$&32767;if(f>2&&_==B(i-D))for(var W=Math.min(M,f)-1,j=Math.min(32767,i),V=Math.min(258,f);D<=j&&--ne&&T!=$;){if(e[i+L]==e[i+L-D]){for(var p=0;p<V&&e[i+p]==e[i+p-D];++p);if(p>L){if(L=p,H=D,p>W)break;for(var G=Math.min(D,p-2),de=0,b=0;b<G;++b){var ae=i-D+b&32767,Oe=w[ae],be=ae-Oe&32767;be>de&&(de=be,$=ae)}}}T=$,$=w[T],D+=T-$&32767}if(H){x[k++]=268435456|ce[L]<<18|Ne[H];var me=ce[L]&31,ge=Ne[H]&31;h+=he[me]+ue[ge],++P[257+me],++F[ge],R=i+L,++C}else x[k++]=e[i],++P[e[i]]}}for(i=Math.max(i,R);i<c;++i)x[k++]=e[i],++P[e[i]];o=pe(e,s,g,x,P,F,h,k,S,i-S,o),g||(l.r=o&7|s[o/8|0]<<3,o-=7,l.h=E,l.p=w,l.i=i,l.w=R)}else{for(var i=l.w||0;i<c+g;i+=65535){var te=i+65535;te>=c&&(s[o/8|0]=g,te=c),o=$e(s,o+1,e.subarray(i,te))}l.i=c}return Te(u,0,t+Fe(o)+r)},Re=(function(){for(var e=new Int32Array(256),n=0;n<256;++n){for(var a=n,t=9;--t;)a=(a&1&&-306674912)^a>>>1;e[n]=a}return e})(),_e=function(){var e=-1;return{p:function(n){for(var a=e,t=0;t<n.length;++t)a=Re[a&255^n[t]]^a>>>8;e=a},d:function(){return~e}}},He=function(e,n,a,t,r){if(!r&&(r={l:1},n.dictionary)){var l=n.dictionary.subarray(-32768),c=new I(l.length+e.length);c.set(l),c.set(e,l.length),e=c,r.w=l.length}return qe(e,n.level==null?6:n.level,n.mem==null?r.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+n.mem,a,t,r)},ve=function(e,n,a){for(;a;++n)e[n]=a,a>>>=8},Je=function(e,n){var a=n.filename;if(e[0]=31,e[1]=139,e[2]=8,e[8]=n.level<2?4:n.level==9?2:0,e[9]=3,n.mtime!=0&&ve(e,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),a){e[3]=8;for(var t=0;t<=a.length;++t)e[t+10]=a.charCodeAt(t)}},Ke=function(e){return 10+(e.filename?e.filename.length+1:0)};function je(e,n){n||(n={});var a=_e(),t=e.length;a.p(e);var r=He(e,n,Ke(n),8),l=r.length;return Je(r,n),ve(r,l-8,a.d()),ve(r,l-4,t),r}var ke=typeof TextEncoder<"u"&&new TextEncoder,Ge=typeof TextDecoder<"u"&&new TextDecoder,Qe=0;try{Ge.decode(Le,{stream:!0}),Qe=1}catch{}function We(e,n){var a;if(ke)return ke.encode(e);for(var t=e.length,r=new I(e.length+(e.length>>1)),l=0,c=function(g){r[l++]=g},a=0;a<t;++a){if(l+5>r.length){var u=new I(l+8+(t-a<<1));u.set(r),r=u}var s=e.charCodeAt(a);s<128||n?c(s):s<2048?(c(192|s>>6),c(128|s&63)):s>55295&&s<57344?(s=65536+(s&1047552)|e.charCodeAt(++a)&1023,c(240|s>>18),c(128|s>>12&63),c(128|s>>6&63),c(128|s&63)):(c(224|s>>12),c(128|s>>6&63),c(128|s&63))}return Te(r,0,l)}const Q="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Xe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<Q.length;e++)Xe[Q.charCodeAt(e)]=e;function Ye(e){const n=new Uint8Array(e),a=n.length;let t="";for(let r=0;r<a;r+=3)t+=Q[n[r]>>2],t+=Q[(n[r]&3)<<4|n[r+1]>>4],t+=Q[(n[r+1]&15)<<2|n[r+2]>>6],t+=Q[n[r+2]&63];return a%3===2?t=`${t.substring(0,t.length-1)}=`:a%3===1&&(t=`${t.substring(0,t.length-2)}==`),t}function Se(e){const n=JSON.stringify(e),a=je(We(n));return Ye(a)}async function Me(e,n){const a=document.createElement("a");a.href=n+e,a.click()}const Pe="mpv-remote://",Ze="mpv_remote_7780";function er(){const[e,n]=X(Ze),[a,t]=X(""),[r,l]=X(!1),[c,u]=X(100),[s,g]=X(1),o=we(f=>{const L=Se([f]);Me(`${L}?${e}`,Pe),console.log(`Command: ${f}`)},[e]),y=we(()=>{const f=a?[a,`--input-ipc-server=${e}`]:["--idle",`--input-ipc-server=${e}`],b=Se(f);Me(b,Pe),l(!0),console.log("Started mpv",f)},[a,e]),M=()=>o("set pause no"),N=()=>o("set pause yes"),A=()=>o("cycle pause"),w=()=>{o("quit"),l(!1)},E=()=>o("seek -10"),z=()=>o("seek 10"),U=()=>o("seek -60"),B=()=>o("seek 60"),x=f=>{const b=Number(f.target.value);u(b),o(`set volume ${b}`)},P=()=>o("cycle mute"),F=f=>{g(f),o(`set speed ${f}`)},C=()=>o("cycle fullscreen"),h=()=>o("cycle osd-level"),i=()=>o("playlist-prev"),k=()=>o("playlist-next"),R=()=>o("add chapter -1"),S=()=>o("add chapter 1"),_=()=>o("cycle sub"),T=()=>o("cycle sub-visibility"),$=()=>o("cycle audio");return m("div",{className:"app-container",children:[v("h1",{className:"title",children:"MPV Remote Control"}),m("section",{className:"input-section",children:[m("div",{className:"input-group",children:[v("label",{htmlFor:"ipc-name",children:"IPC Server Name"}),v("input",{id:"ipc-name",type:"text",value:e,onChange:f=>n(f.target.value),placeholder:"mpv_remote_7780"})]}),m("div",{className:"input-group",children:[v("label",{htmlFor:"media-path",children:"Media Path / URL (empty for idle mode)"}),v("input",{id:"media-path",type:"text",value:a,onChange:f=>t(f.target.value),placeholder:"C:/video.mp4 or https://youtube.com/..."})]}),v("button",{className:"btn btn-primary btn-start",onClick:y,children:"Start MPV"})]}),m("section",{className:`control-panel ${r?"active":"disabled"}`,children:[v("h2",{children:"Player Controls"}),m("div",{className:"control-group",children:[v("h3",{children:"Playback"}),m("div",{className:"btn-row",children:[v("button",{className:"btn",onClick:M,disabled:!r,children:"‚ñ∂ Play"}),v("button",{className:"btn",onClick:N,disabled:!r,children:"‚è∏ Pause"}),v("button",{className:"btn",onClick:A,disabled:!r,children:"‚èØ Toggle"}),v("button",{className:"btn btn-danger",onClick:w,disabled:!r,children:"‚èπ Stop"})]})]}),m("div",{className:"control-group",children:[v("h3",{children:"Seek"}),m("div",{className:"btn-row",children:[v("button",{className:"btn",onClick:U,disabled:!r,children:"‚è™ -60s"}),v("button",{className:"btn",onClick:E,disabled:!r,children:"‚óÄ -10s"}),v("button",{className:"btn",onClick:z,disabled:!r,children:"‚ñ∂ +10s"}),v("button",{className:"btn",onClick:B,disabled:!r,children:"‚è© +60s"})]})]}),m("div",{className:"control-group",children:[m("h3",{children:["Volume: ",c,"%"]}),m("div",{className:"slider-row",children:[v("input",{type:"range",min:"0",max:"150",value:c,onChange:x,disabled:!r,className:"slider"}),v("button",{className:"btn",onClick:P,disabled:!r,children:"üîá Mute"})]})]}),m("div",{className:"control-group",children:[m("h3",{children:["Speed: ",s.toFixed(2),"x"]}),v("div",{className:"btn-row",children:[.5,.75,1,1.25,1.5,2].map(f=>m("button",{className:`btn ${s===f?"btn-active":""}`,onClick:()=>F(f),disabled:!r,children:[f,"x"]},f))})]}),m("div",{className:"control-group",children:[v("h3",{children:"Playlist / Chapter"}),m("div",{className:"btn-row",children:[v("button",{className:"btn",onClick:i,disabled:!r,children:"‚èÆ Prev"}),v("button",{className:"btn",onClick:k,disabled:!r,children:"‚è≠ Next"}),v("button",{className:"btn",onClick:R,disabled:!r,children:"‚óÄ Ch-"}),v("button",{className:"btn",onClick:S,disabled:!r,children:"‚ñ∂ Ch+"})]})]}),m("div",{className:"control-group",children:[v("h3",{children:"Display"}),m("div",{className:"btn-row",children:[v("button",{className:"btn",onClick:C,disabled:!r,children:"‚õ∂ Fullscreen"}),v("button",{className:"btn",onClick:h,disabled:!r,children:"üìä OSD"})]})]}),m("div",{className:"control-group",children:[v("h3",{children:"Subtitle / Audio"}),m("div",{className:"btn-row",children:[v("button",{className:"btn",onClick:_,disabled:!r,children:"üìù Cycle Sub"}),v("button",{className:"btn",onClick:T,disabled:!r,children:"üëÅ Toggle Sub"}),v("button",{className:"btn",onClick:$,disabled:!r,children:"üîä Cycle Audio"})]})]})]})]})}Ue(document.getElementById("root")).render(v(Ie,{children:v(er,{})}));
